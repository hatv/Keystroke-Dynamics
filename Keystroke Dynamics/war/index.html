<!doctype html>
<!-- Standards Mode -->

<html>
	<head>
		<meta charset=UTF-8>
		<link
			type="text/css"
			rel="stylesheet"
			href="default.css">
		<title>Keystroke Dynamics Analysis</title>
	
		<script
			type="text/javascript"
			src="keydyn/keydyn.nocache.js">
		</script>
		<!-- TODO focus auto at start-up and convert to JSNI -->
		<script type="text/javascript">
			function startFocus(id) {
				window.onfocus = function() {
					document.getElementById(id).requestFocus();
				};
				window.onclick = function() {
					document.getElementById(id).requestFocus();
				};
			}
			function stopFocus() {
                window.onfocus = function() {};
                window.onclick = function() {};
            }
		</script>
		<script type="text/javascript">
		    document.getElementById("txtInput").onkeydown = checkKeycode;
document.getElementById("txtInput").onkeyup = checkKeycode2; 
var pressTable = new Array();
var releaseTable = new Array();
var i = 0;
var j = 0;
var firsttime;
function checkKeycode(e) {
    //alert('test');
    var keycode;
    if (window.event) keycode = window.event.keyCode;
    else if (e) keycode = e.which;
    //alert(keycode);
    if (keycode == 13) {
        appletCallback(document.getElementById("txtInput").value + ";[" + pressTable.toString() + "];[" + releaseTable.toString() + "]");
        pressTable = new Array();
        releaseTable = new Array();
        i = 0;
        j = 0;
    } else {
        var d = new Date();
        if (i === 0) {
            firsttime = d.getTime();
            pressTable[i] = 0;
        } else {
            pressTable[i] = d.getTime() - firsttime;
        }
        ++i;
    }
}
function checkKeycode2(e) {
    var keycode;
    if (window.event) keycode = window.event.keyCode;
    else if (e) keycode = e.which;
    //alert(keycode);
    if (keycode == 13) {
        pressTable = new Array();
        releaseTable = new Array();
        i = 0;
        j = 0;
    } else {
        var d = new Date();
        releaseTable[j] = d.getTime() - firsttime;
        ++j;
    }
}
		</script>
	</head>
	<body>
		<!-- If JavaScript is not enabled -->
		<noscript>
			<div
			    style="width: 22em;
			    position: absolute;
			    left: 50%;
			    margin-left: -11em;
			    color: red;
			    background-color: white;
			    border: 1px solid red;
			    padding: 4px;
			    font-family: sans-serif">
				You must enable JavaScript on your browser in order for this 
				application to display correctly.
				<!-- TODO : Link to the about page to explain what the
				application does. -->
			</div>
		</noscript>
	
		<h1>Keystroke Dynamics Analysis</h1>
		<div id="content"></div>
		<div id="infos"></div>
		<div id="errors"></div>
	</body>
</html>
